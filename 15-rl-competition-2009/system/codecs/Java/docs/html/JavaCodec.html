<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>RL-Glue Java Codec</TITLE>
<META NAME="description" CONTENT="RL-Glue Java Codec">
<META NAME="keywords" CONTENT="JavaCodec">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="JavaCodec.css">

</HEAD>

<BODY >
<!--Navigation Panel-->
<IMG WIDTH="81" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next_inactive" SRC="nx_grp_g.png"> 
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_g.png"> 
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev_g.png">   
<BR>
<BR>
<BR>
<!--End of Navigation Panel-->
<H1 ALIGN="CENTER">RL-Glue Java Extension (Codec) 2.03 Manual </H1>
<DIV>

<P ALIGN="CENTER"><STRONG>Brian Tanner ::brian@tannerpages.com</STRONG></P>
</DIV>
<BR>

<H2><A NAME="SECTION00010000000000000000">
Contents</A>
</H2>
<!--Table of Contents-->

<UL>
<LI><A NAME="tex2html73"
  HREF="JavaCodec.html#SECTION00020000000000000000">Introduction</A>
<UL>
<LI><A NAME="tex2html74"
  HREF="JavaCodec.html#SECTION00021000000000000000">Software Requirements</A>
<LI><A NAME="tex2html75"
  HREF="JavaCodec.html#SECTION00022000000000000000">Getting the Codec</A>
<LI><A NAME="tex2html76"
  HREF="JavaCodec.html#SECTION00023000000000000000">Installing the Codec</A>
<LI><A NAME="tex2html77"
  HREF="JavaCodec.html#SECTION00024000000000000000">Removing the Codec</A>
</UL>
<BR>
<LI><A NAME="tex2html78"
  HREF="JavaCodec.html#SECTION00030000000000000000">Sample Project</A>
<UL>
<LI><A NAME="tex2html79"
  HREF="JavaCodec.html#SECTION00031000000000000000">Skeleton Agent</A>
<LI><A NAME="tex2html80"
  HREF="JavaCodec.html#SECTION00032000000000000000">Skeleton Environment</A>
<LI><A NAME="tex2html81"
  HREF="JavaCodec.html#SECTION00033000000000000000">Skeleton Experiment</A>
<LI><A NAME="tex2html82"
  HREF="JavaCodec.html#SECTION00034000000000000000">Running All Three Components Together</A>
<LI><A NAME="tex2html83"
  HREF="JavaCodec.html#SECTION00035000000000000000">Going Further - Mines Sarsa Example Project</A>
</UL>
<BR>
<LI><A NAME="tex2html84"
  HREF="JavaCodec.html#SECTION00040000000000000000">Who creates and frees memory?</A>
<LI><A NAME="tex2html85"
  HREF="JavaCodec.html#SECTION00050000000000000000">Advanced Features</A>
<UL>
<LI><A NAME="tex2html86"
  HREF="JavaCodec.html#SECTION00051000000000000000">Task Specification Parser</A>
<LI><A NAME="tex2html87"
  HREF="JavaCodec.html#SECTION00052000000000000000">Connecting on custom ports to custom hosts</A>
<LI><A NAME="tex2html88"
  HREF="JavaCodec.html#SECTION00053000000000000000">Running in Local Mode without Network Sockets</A>
</UL>
<BR>
<LI><A NAME="tex2html89"
  HREF="JavaCodec.html#SECTION00060000000000000000">Codec Specification Reference</A>
<UL>
<LI><A NAME="tex2html90"
  HREF="JavaCodec.html#SECTION00061000000000000000">Types</A>
<LI><A NAME="tex2html91"
  HREF="JavaCodec.html#SECTION00062000000000000000">Functions</A>
</UL>
<BR>
<LI><A NAME="tex2html92"
  HREF="JavaCodec.html#SECTION00070000000000000000">Changes and 2.x Backward Compatibility</A>
<UL>
<LI><A NAME="tex2html93"
  HREF="JavaCodec.html#SECTION00071000000000000000">RL-Glue Split and Package/Jar Naming Changes</A>
<LI><A NAME="tex2html94"
  HREF="JavaCodec.html#SECTION00072000000000000000">Agent/Environment Loading</A>
</UL>
<BR>
<LI><A NAME="tex2html95"
  HREF="JavaCodec.html#SECTION00080000000000000000">Frequently Asked Questions</A>
<UL>
<LI><A NAME="tex2html96"
  HREF="JavaCodec.html#SECTION00081000000000000000">Where can I get more help?</A>
</UL>
<BR>
<LI><A NAME="tex2html97"
  HREF="JavaCodec.html#SECTION00090000000000000000">Credits and Acknowledgements</A>
<UL>
<LI><A NAME="tex2html98"
  HREF="JavaCodec.html#SECTION00091000000000000000">Contributing</A>
</UL></UL>
<!--End of Table of Contents-->
<P>

<H1><A NAME="SECTION00020000000000000000">
Introduction</A>
</H1>

<P>
This document describes how to use the RL-Glue Java Extension, a software library (or codec) that provides socket-compatibility with the RL-Glue Reinforcement Learning software library.

<P>
For general information and motivation about the RL-Glue<A NAME="tex2html1"
  HREF="#foot225"><SUP>1</SUP></A> project, please refer to the documentation provided with that project.

<P>
This codec will allow you to create agents, environments, and experiment programs in Java.

<P>
This software project is licensed under the Apache-2.0<A NAME="tex2html3"
  HREF="#foot226"><SUP>2</SUP></A> license. We're not lawyers, but our intention is that this code 
should be used however it is useful.  We'd appreciate to hear what you're using it for, and to get credit if appropriate.

<P>
This project has a home here:
<BR><TT><A NAME="tex2html5"
  HREF="http://glue.rl-community.org/Home/Extensions/java-codec">http://glue.rl-community.org/Home/Extensions/java-codec</A></TT>
<P>

<H2><A NAME="SECTION00021000000000000000">
Software Requirements</A>
</H2>
To mix agents, environments, and experiments created with this codec with components from any different language, you will need to have RL-Glue executable socket server (<TT>rl_glue(.exe)</TT>) installed on your computer.  It is available in several packages at:
<BR>
<TT><A NAME="tex2html6"
  HREF="http://code.google.com/p/rl-glue-ext/wiki/RLGlueCore">http://code.google.com/p/rl-glue-ext/wiki/RLGlueCore</A></TT>
<P>
If you are going to create your agents, environment, and experiment <B>strictly</B> in Java, then you do not need any more than what is in the Java RL-Glue Extension.  In that java-only case, you do not need to use sockets to connect your components together.  Be warned, most of the examples in this manual assume that you will be using sockets. A little more information about running without sockets is in Section <A HREF="#no-sockets">4.3</A>.

<P>
Compiling and running components with this codec requires Java 1.5 or higher. You can find out what version you have by doing the following at the command-line:
<PRE>
	&gt;$ java -version
</PRE>

<P>
This codec is distributed as a compiled Java JAR file, so you do not need to compile it in order to use it.

<P>
If you are a developer and you want to compile the codec from source, you will need the Apache Ant<A NAME="tex2html7"
  HREF="#foot227"><SUP>3</SUP></A> build system.  You probably need JUnit and Subversion installed as well. We'll try to make those optional dependencies in the future.

<P>

<H2><A NAME="SECTION00022000000000000000">
Getting the Codec</A>
</H2>
The codec can be downloaded either as a .tar.gz or can be checked out of the subversion repository where it is hosted.

<P>
The tarball distribution can be found here:
<BR>
<TT><A NAME="tex2html9"
  HREF="http://code.google.com/p/rl-glue-ext/wiki/Java">http://code.google.com/p/rl-glue-ext/wiki/Java</A></TT>
<P>
To check the code out of subversion:
<BR>
<TT>svn checkout http://rl-glue-ext.googlecode.com/svn/trunk/projects/codecs/Java Java-Codec</TT>

<P>
Technically all you really <B>need</B> is the JAR archive of the codec:
<BR>
<FONT SIZE="-1"><TT>svn export http://rl-glue-ext.googlecode.com/svn/trunk/projects/codecs/Java/products/JavaRLGlueCodec.jar</TT> </FONT>
<P>

<H2><A NAME="SECTION00023000000000000000">
Installing the Codec</A>
</H2>
This codec can either be installed into a Java extensions directory, or it can be used uninstalled in ``free-float'' mode by specifying it in the Java <TT>classpath</TT> when compiling and running Java classes.

<P>
The advantage of installed mode is that your system will always know about the RL-Glue classes, so the code required to compile and run Java classes is much cleaner.  The downside of installing is that Java will always find the extension classes first, meaning that you can not easily move between different versions of the classes just by specifying a different classpath.

<P>
Below are two examples of how you would work with the code, and then you can choose for yourself whether to install or not.  This manual's instructions will all be written as if you have installed, for clarity.

<P>
<PRE>
//Not installed (free-float) mode
&gt;$ javac -cp path/to/codecs/Java/products/JavaRLGlueCodec.jar MyAgent.java
&gt;$ java -cp path/to/codecs/Java/products/JavaRLGlueCodec.jar:. MyAgent

//Installed mode
&gt;$ javac MyAgent.java
&gt;$ java MyAgent
</PRE>

<P>
To install the RL-Glue Java Extension, do the following:
<PRE>
//This location will depend on if you have the developer distribution
//or the user distribution

//User Distribution do this
&gt;$ cd path/to/downloaded/codec/Java/

//Developer Distribution do this
&gt;$ cd path/to/downloaded/codec/Java/products

//Both distributions install the same way
&gt;$ java -jar JavaRLGlueCodec.jar --install

//Test it by typing:
&gt;$ java org.rlcommunity.rlglue.codec.RLGlueCore --version
</PRE>

<P>
This will provide you with a numbered list, prompting you to choose a Java extension folder to install to that is appropriate for your system.

<P>

<H2><A NAME="SECTION00024000000000000000">
Removing the Codec</A>
</H2>
If you have installed the RL-Glue Java Extension, it can be removed automatically with the command:
<PRE>
&gt;$ java org.rlcommunity.rlglue.codec.RLGlueCore --uninstall
</PRE>

<P>
Alternatively, it can be removed any time by manually deleting the JAR file from the appropriate extensions folder.

<P>

<H1><A NAME="SECTION00030000000000000000">
Sample Project</A>
</H1>
We have included two example projects with this codec, located in the <TT>examples</TT> directory.  Each project contains an agent, environment, and experiment written for this Java codec.  The two projects are <TT>skeleton</TT> and <TT>mines-sarsa-sample</TT>.

<P>
The <TT>skeleton</TT> contains all of the bare-bones plumbing that is required to create an agent/environment/experiment with this codec and might be a good starting point for creating your own components.

<P>
The <TT>mines-sarsa-sample</TT> contains a fully functional tabular Sarsa learning algorithm, a discrete-observation grid world problem, and an experiment program that can run these together and gather results.  More details below in Section <A HREF="#mines-sarsa-sample">2.5</A>.

<P>
In the following sections, we will describe the skeleton project.  Running and using the <TT>mines-sarsa-sample</TT> is analogous.

<P>
<B>Note: these examples assume that the RL-Glue Java Extension is installed, so they do not specify adding <TT>JavaRLGlueCodec.jar</TT> to the classpath every time.</B>

<P>

<H2><A NAME="SECTION00031000000000000000"></A>
<A NAME="sec:agent"></A>
<BR>
Skeleton Agent
</H2>
We have provided a skeleton agent with the codec that is a good starting point for agents that you may write in the future.
It implements all the required functions and provides a good example of how to compile a simple agent.

<P>
The pertinent file is:
<PRE>
	examples/skeleton-sample/SkeletonAgent.java
</PRE>

<P>
This agent does not learn anything and randomly chooses integer action 0 or 1.  

<P>
You can compile and run the agent by typing:
<PRE>
	&gt;$ cd examples/skeleton-sample
	&gt;$ javac SkeletonAgent.java
	&gt;$ java SkeletonAgent
</PRE>

<P>
You will see something like:
<PRE>
     RL-Glue Java Agent Codec Version: 2.0 (Build:465:481M)
          Connecting to 127.0.0.1 on port 4096...
</PRE>

<P>
This means that the SkeletonAgent is running, and trying to connect to the <TT>rl_glue</TT> executable server on the local machine through port 4096! 

<P>
You can kill the process by pressing <TT>CTRL-C</TT> on your keyboard.

<P>
The Skeleton agent is very simple and well documented, so we won't spend any more time talking about it in these instructions.
Please open it up and take a look.

<P>

<H2><A NAME="SECTION00032000000000000000"></A>
<A NAME="sec:env"></A>
<BR>
Skeleton Environment
</H2>
We have provided a skeleton environment with the codec that is a good starting point for environments that you may write in the future.
It implements all the required functions and provides a good example of how to compile a simple environment.  This section will follow the same 
pattern as the agent version (Section <A HREF="#sec:agent">2.1</A>).  This section will be less detailed because many ideas are similar or identical.

<P>
The pertinent file is:
<PRE>
	examples/skeleton-sample/SkeletonEnvironment.java
</PRE>

<P>
This environment is episodic, with 21 states, labeled <!-- MATH
 $\{0, 1,\ldots,19,20\}$
 -->
<IMG
 WIDTH="128" HEIGHT="35" ALIGN="MIDDLE" BORDER="0"
 SRC="img1.png"
 ALT="$\{0, 1,\ldots,19,20\}$">. States {0, 20} are terminal and return rewards of {-1, +1} respectively.  The other states return reward of 0.
There are two actions, {0, 1}.  Action 0 decrements the state number, and action 1 increments it. The environment starts in state 10.

<P>
You can compile and run the environment by typing:
<PRE>
	&gt;$ cd examples/skeleton-sample
	&gt;$ javac SkeletonEnvironment.java
	&gt;$ java SkeletonEnvironment
</PRE>

<P>
You will see something like:
<PRE>
     RL-Glue Java Environment Codec Version: 2.0 (Build:192:239M)
          Connecting to 127.0.0.1 on port 4096...
</PRE>

<P>
This means that the SkeletonEnvironment is running, and trying to connect to the <TT>rl_glue</TT> executable server on the local machine through port 4096! 

<P>
You can kill the process by pressing <TT>CTRL-C</TT> on your keyboard.

<P>
The Skeleton environment is very simple and well documented, so we won't spend any more time talking about it in these instructions.
Please open it up and take a look.

<P>

<H2><A NAME="SECTION00033000000000000000">
Skeleton Experiment</A>
</H2>
We have provided a skeleton experiment with the codec that is a good starting point for experiments that you may write in the future.
It implements all the required functions and provides a good example of how to compile a simple experiment.  This section will follow the same 
pattern as the agent version (Section <A HREF="#sec:agent">2.1</A>).  This section will be less detailed because many ideas are similar or identical.

<P>
The pertinent files are:
<PRE>
	examples/skeleton-sample/SkeletonExperiment.java
</PRE>

<P>
This experiment runs <TT>RL_Episode</TT> a few times, sends some messages to the agent and environment, and then steps through one episode using <TT>RL_step</TT>.

<P>
<PRE>
	&gt;$ cd examples/skeleton-sample
	&gt;$ javac SkeletonExperiment.java
	&gt;$ java SkeletonExperiment
</PRE>

<P>
You will see something like:
<PRE>
     Experiment starting up!
     RL-Glue Java Experiment Codec Version: 2.0 (Build:192:239M)
          Connecting to 127.0.0.1 on port 4096...
</PRE>

<P>
This means that the SkeletonExperiment is running, and trying to connect to the <TT>rl_glue</TT> executable server on the local machine through port 4096!  

<P>
You can kill the process by pressing <TT>CTRL-C</TT> on your keyboard.

<P>
The Skeleton experiment is very simple and well documented, so we won't spend any more time talking about it in these instructions.
Please open it up and take a look.

<P>

<H2><A NAME="SECTION00034000000000000000">
Running All Three Components Together</A>
</H2>
At this point, we've compiled and run each of the three components, now it's time to run them with the <TT>rl_glue</TT> executable server.  The following will work from the examples 
directory if you have them all built, and RL-Glue installed in the default location:
<PRE>
	&gt;$ cd examples/skeleton-sample
	&gt;$ rl_glue &amp;
	&gt;$ javac *.java
	&gt;$ java SkeletonAgent &amp;
	&gt;$ java SkeletonEnvironment &amp;
	&gt;$ java SkeletonExperiment
</PRE>

<P>
If RL-Glue is not installed in the default location, you'll have to start the <TT>rl_glue</TT> executable server using its full path (unless it's in your <TT>PATH</TT> environment variable):
<PRE>
	&gt;$ /path/to/rl-glue/bin/rl_glue &amp;
</PRE>

<P>
You should see output like the following if it worked:
<PRE>
	&gt;$ rl_glue &amp; 
	RL-Glue Version 3.0-beta-1, Build 848:856
     	RL-Glue is listening for connections on port=4096

	&gt;$ java SkeletonAgent &amp;
	RL-Glue Java Agent Codec Version: 2.0 (Build:192:239M)
	     Connecting to 127.0.0.1 on port 4096...
	     Agent Codec Connected
	     RL-Glue :: Agent connected.
	
	&gt;$ java SkeletonEnvironment &amp;
	RL-Glue Java Environment Codec Version: 2.0 (Build:192:239M)
	     Connecting to 127.0.0.1 on port 4096...
	     Environment Codec Connected
	     RL-Glue :: Environment connected.

	&gt;$ java SkeletonExperiment
	Experiment starting up!

	RL-Glue Java Experiment Codec Version: 2.0 (Build:192:239M)
	     Connecting to 127.0.0.1 on port 4096...
	     Experiment Codec Connected
	     RL-Glue :: Experiment connected.

	     Skeleton agent parsed the task spec.
	     Observation have 1 integer dimensions
	     Actions have 1 integer dimensions
	     Observation (state) range is: 0 to 20
	     Action range is: 0 to 1
	     Reward range is: -1.0 to 1.0
	     RL_init called, the environment sent task spec:
VERSION RL-Glue-3.0 PROBLEMTYPE episodic DISCOUNTFACTOR 1.0 
OBSERVATIONS INTS (1 0 20)  ACTIONS INTS (1 0 1)  REWARDS (1 -1.0 1.0)  EXTRA 



	----------Sending some sample messages----------
	Agent responded to "what is your name?" with: my name is skeleton_agent, Java edition!
	Agent responded to "If at first you don't succeed; call it version 1.0" with: I don't know how to respond to your message

	Environment responded to "what is your name?" with: my name is skeleton_environment, Java edition!
	Environment responded to "If at first you don't succeed; call it version 1.0" with: I don't know how to respond to your message


	----------Running a few episodes----------
	Episode 0	 10 steps 	-1.0 total reward	 1 natural end
	Episode 1	 10 steps 	-1.0 total reward	 1 natural end
	Episode 2	 10 steps 	-1.0 total reward	 1 natural end
	Episode 3	 10 steps 	-1.0 total reward	 1 natural end
	Episode 4	 10 steps 	-1.0 total reward	 1 natural end
	Episode 5	 1 steps 	0.0 total reward	 0 natural end
	Episode 6	 10 steps 	-1.0 total reward	 1 natural end


	----------Stepping through an episode----------
	First observation and action were: 10 and: 0


	----------Summary----------
	It ran for 10 steps, total reward was: -1.0
</PRE>

<P>

<H3><A NAME="SECTION00034100000000000000"></A>
<A NAME="all-one-class"></A>
<BR>
Running All Three From One Java Class
</H3>
If more than one of the components you are using is written in Java, you may appreciate a more convenient way to run them than using separate terminals.  In the case where your agent, environment, or experiment program are all written in Java, you can even start them all from a single Java file.

<P>
New in Version 2.03 of the RL-Glue Java Extension, you can even run them locally, without network sockets or the <TT>rl_glue</TT> executable socket server.  Examples of how to do this are provided with the sample skeleton project, both <A NAME="tex2html10"
  HREF="http://code.google.com/p/rl-glue-ext/source/browse/trunk/projects/codecs/Java/examples/skeleton-sample/RunAllSkeleton.java">with sockets</A>
and <A NAME="tex2html11"
  HREF="http://code.google.com/p/rl-glue-ext/source/browse/trunk/projects/codecs/Java/examples/skeleton-sample/RunAllSkeletonNoSockets.java">without</A>.

<P>

<H2><A NAME="SECTION00035000000000000000"></A>
<A NAME="mines-sarsa-sample"></A>
<BR>
Going Further - Mines Sarsa Example Project
</H2>
The <TT>skeleton</TT> sample project is extremely limited and only shows the mechanics of how RL-Glue components are structured using the Java codec.  The <TT>mines-sarsa</TT> sample project is much richer.

<P>
More details about the <TT>mines-sarsa</TT> sample project can be found at their RL-Library home:
<BR>
<TT><A NAME="tex2html12"
  HREF="http://library.rl-community.org/packages/mines-sarsa-sample">http://library.rl-community.org/packages/mines-sarsa-sample</A></TT>
<P>

<H3><A NAME="SECTION00035100000000000000"></A>
<A NAME="mines-sample"></A>
<BR>
Sample-Mines-Environment
</H3>
The 
<A NAME="tex2html15"
  HREF="http://code.google.com/p/rl-library/source/browse/trunk/projects/packages/examples/mines-sarsa-java/SampleMinesEnvironment.java">mines environment</A>
is internally a two-dimensional, discrete grid world where the agent receives a penalty per step until reaching a goal state, hopefully without stepping on any exploding land-mines along the way.  The (x,y) state is flattened into a discrete, scalar observation for the agent.  This environment can receive special messages from the experiment program to print the current state to the screen, and also to toggle between random starting states and a fixed starting-state specified by the experiment.

<P>
The task specification string<A NAME="tex2html13"
  HREF="#foot229"><SUP>4</SUP></A> is created in a semi-automated way using the Java RL-Glue Extension task spec parser/builder. 

<P>

<H3><A NAME="SECTION00035200000000000000"></A>
<A NAME="sarsa-sample"></A>
<BR>
Samples-Sarsa-Agent
</H3>
The 
<A NAME="tex2html16"
  HREF="http://code.google.com/p/rl-library/source/browse/trunk/projects/packages/examples/mines-sarsa-java/SampleSarsaAgent.java">SARSA agent</A>
is a tabular learning agent that uses <!-- MATH
 $\epsilon-greedy$
 -->
<IMG
 WIDTH="84" HEIGHT="33" ALIGN="MIDDLE" BORDER="0"
 SRC="img2.png"
 ALT="$\epsilon-greedy$"> exploration as described in <A NAME="tex2html17"
  HREF="http://www.cs.ualberta.ca/~sutton/book/ebook/node64.html">Reinforcement Learning: An Introduction</A>
by Sutton and Barto.

<P>
The SARSA agent parses the task specification string using the Java RL-Glue Extension task spec parser.  This agent can receive special messages from the experiment program to pause/unpause learning, pause/unpause exploring, save the current value function to a file, and load the the value function from a file.

<P>

<H3><A NAME="SECTION00035300000000000000">
Sample-Experiment</A>
</H3>
The sample experiment program runs the show.  First, it alternates running the agent in the environment for a number of episodes, and telling the agent to pause learning so that the current performance can be evaluated.  These results are saved to a comma-separated-value file.

<P>
The sample experiment then tells the agent to save the value function to a file, and then resets the experiment (and agent) to initial conditions.  After verifying that the agent's initial policy is bad, the experiment tells the agent to load the value function from the file.  The agent is evaluated again using this previously-learned value function, and performance is dramatically better.

<P>
Finally, the experiment sends a message to specify that the environment should use a fixed (instead of random) starting state, and runs the agent from that fixed start state for a while.

<P>

<H1><A NAME="SECTION00040000000000000000">
Who creates and frees memory?</A>
</H1>
The RL-Glue technical manual has a section called <I>Who creates and frees memory?</I>.  The general approach recommended there is to make a copy of data
you want to keep beyond the method it was given to you.  The same rules of thumb from that manual should be followed when using the Java codec.  Both sample projects make copies of observations and actions in the appropriate way, and they can be used as a guide.

<P>

<H1><A NAME="SECTION00050000000000000000">
Advanced Features</A>
</H1>

<H2><A NAME="SECTION00051000000000000000">
Task Specification Parser</A>
</H2>
As of fall 2008, we've updated the task specification language:
<BR><TT><A NAME="tex2html18"
  HREF="http://glue.rl-community.org/Home/rl-glue/task-spec-language">http://glue.rl-community.org/Home/rl-glue/task-spec-language</A></TT>
<P>
The new task specification string parser should be used in environments to create task specification strings in <TT>env_init</TT>.  Both sample environments provide an example of creating a task spec in this way.  There are also several advanced examples of this in the RL-Library<A NAME="tex2html19"
  HREF="#foot230"><SUP>5</SUP></A>.  The task spec parser/builder can also be used by agents to decode the task spec string for <TT>agent_init</TT>.  The sample sarsa agent in Section <A HREF="#sarsa-sample">2.5.2</A> demonstrates how to do this.

<P>

<H2><A NAME="SECTION00052000000000000000">
Connecting on custom ports to custom hosts</A>
</H2>
This section will explain how to set custom target IP addresses (to connect over the network) and custom ports (to run multiple experiments on one machine or to avoid firewall issues).
Sometimes you will want run the <TT>rl_glue</TT> server on a port other than the default
(4096) either because of firewall issues, or because you want to run multiple instances on the same machine.

<P>
In these cases, you can tell your Java agent, environment, or experiment program to connect on a custom port and/or to a custom host using the environment variables <TT>RLGLUE_PORT</TT> and <TT>RLGLUE_HOST</TT>.

<P>
For example, try the following code:
<PRE>
&gt; $ RLGLUE_PORT=1025 RLGLUE_HOST=yahoo.ca java SkeletonAgent
</PRE>

<P>
That command could give output like:
<PRE>
	RL-Glue Java Agent Codec Version: 2.0 (Build:390M)
		Connecting to yahoo.ca on port 1025...
</PRE>

<P>
This works for agents, environments, and experiments.  In practice, yahoo.ca probably isn't running an RL-Glue server.

<P>
You can specify the port, the host, neither, or both.  Ports must be numbers, hosts can be hostnames or ip addresses. Default port value is 4096 and host is 127.0.0.1.

<P>
If you don't like typing these variables every time, you can export them so that the value will be set for future
calls  in the same session:
<PRE>
	&gt; $ export RLGLUE_PORT=1025
	&gt; $ export RLGLUE_HOST=mydomain.com
</PRE>

<P>
Remember, on most *nix systems, you need <TT>superuser</TT> privileges to listen on ports lower than 1024, so you probably want to pick one higher than that.

<P>

<H2><A NAME="SECTION00053000000000000000"></A>
<A NAME="no-sockets"></A>
<BR>
Running in Local Mode without Network Sockets
</H2>
A new feature has been added in version 2.03 of the RL-Glue Java Extension that lets you run you agents, environments, and experiments all together with Java, without using sockets to connect them together.  This mode is much faster per step than using network sockets.  

<P>
The best part of this feature is that the technique used to bypass the sockets happens outside of the agent, environment, and experiment program, by a new class.  This means that you can program your components and experiment with them locally, but they are still 100% RL-Glue compatible and can be shared with people for use in the language of their choice.  An example of how to do this is linked in Section <A HREF="#all-one-class">2.4.1</A>.

<P>

<H1><A NAME="SECTION00060000000000000000">
Codec Specification Reference</A>
</H1>
This section will explain how the RL-Glue types and functions are defined for this codec.  This isn't meant to be the most exciting section of this document, but it will
be handy.

<P>
Instead of re-creating information that is readily available in the JavaDocs, we will give pointers were appropriate.

<P>

<H2><A NAME="SECTION00061000000000000000">
Types</A>
</H2>

<P>

<H3><A NAME="SECTION00061100000000000000">
Simple Types</A>
</H3>
Unlike the C/C++ codec, we will not be using <TT>typedef</TT> statements to create special labels for the types. In Java:

<UL>
<LI><I>reward</I> is <TT>double</TT>
</LI>
<LI><I>terminal</I> is <TT>int</TT> (1 for terminal, 0 for non-terminal) We hope to replace these with boolean eventually.
</LI>
<LI><I>messages</I> are <TT>String</TT>
</LI>
<LI><I>task specifications</I> are <TT>String</TT>
</LI>
</UL>

<P>

<H3><A NAME="SECTION00061200000000000000"></A>
<A NAME="sec:structure-types"></A>
<BR>
Structure Types
</H3>
All of the major structure types (observations, actions, random seed keys, and state keys) extend the <A NAME="tex2html21"
  HREF="http://rl-glue-ext.googlecode.com/svn/trunk/projects/codecs/Java/javadocs/org/rlcommunity/rlglue/codec/types/RL_abstract_type.html"><TT>RL_Abstract_Type </TT></A>
class.

<P>
All of the types are listed in the <A NAME="tex2html22"
  HREF="http://rl-glue-ext.googlecode.com/svn/trunk/projects/codecs/Java/javadocs/org/rlcommunity/rlglue/codec/types/package-summary.html"><TT>org.rlcommunity.rlglue.codec.types</TT></A>
package.

<P>

<H2><A NAME="SECTION00062000000000000000">
Functions</A>
</H2>

<H3><A NAME="SECTION00062100000000000000">
Agent Functions</A>
</H3>
All agents <B>should implement</B> <A NAME="tex2html23"
  HREF="http://rl-glue-ext.googlecode.com/svn/trunk/projects/codecs/Java/javadocs/org/rlcommunity/rlglue/codec/AgentInterface.html"><TT>org.rlcommunity.rlglue.codec.AgentInterface</TT></A>.

<P>

<H3><A NAME="SECTION00062200000000000000">
Environment Functions</A>
</H3>
All environments <B>should implement</B> <A NAME="tex2html24"
  HREF="http://rl-glue-ext.googlecode.com/svn/trunk/projects/codecs/Java/javadocs/org/rlcommunity/rlglue/codec/EnvironmentInterface.html"><TT>org.rlcommunity.rlglue.codec.EnvironmentInterface</TT></A>.

<P>

<H3><A NAME="SECTION00062300000000000000">
Experiments Functions</A>
</H3>
All experiments <B>can call</B> the static methods in <A NAME="tex2html25"
  HREF="http://rl-glue-ext.googlecode.com/svn/trunk/projects/codecs/Java/javadocs/org/rlcommunity/rlglue/codec/RLGlue.html"><TT>org.rlcommunity.rlglue.codec.RLGlue</TT></A>.

<P>

<H1><A NAME="SECTION00070000000000000000">
Changes and 2.x Backward Compatibility</A>
</H1>
There were many API/Interface changes from RL-Glue 2.x to RL-Glue 3.x.  For those that are at the level of the API and project organization, please refer to the the <A NAME="tex2html26"
  HREF="http://rl-glue.googlecode.com/svn/trunk/docs/html/index.html">RL-Glue overview documentation</A>.

<P>

<H2><A NAME="SECTION00071000000000000000">
RL-Glue Split and Package/Jar Naming Changes</A>
</H2>
With the RL-Glue 3.x project, we've decided to keep the codecs separate from the main RL-Glue project.  This is so the codecs can be more agile while the main RL-Glue project stays very stable.

<P>
Since things were changing, we took an opportunity to fix some of our long-term gripes with the Java codec.  The name of the JAR file has changed from <TT>RL-Glue.jar</TT> to <TT>JavaRLGlueCodec.jar</TT>.

<P>
The JAR file is now distributed in:
<BR>
<TT>rl-glue-ext/projects/codecs/java/products/JavaRLGlueCodec.jar</TT>

<P>
In the previous incarnation of the Java codec, the classes were in a very shallow heirarchy: <TT>rlglue.RLGlue</TT>, <TT>RLGlue.types</TT>, etc.  For the updated release, we've moved to a richer package description that
is more in line with other Java projects in the Reinforcement Learning community.  The new package hierarchy is:
<BR>
<A NAME="tex2html27"
  HREF="http://rl-glue-ext.googlecode.com/svn/trunk/projects/codecs/Java/javadocs/overview-summary.html"><TT>org.rlcommunity.rlglue</TT></A>
<P>
We've also moved a few of the class/interfaces around.  The most notable change is that instead of <TT>Agent</TT> and <TT>Environment</TT> interfaces, we now have 
<A NAME="tex2html28"
  HREF="http://rl-glue-ext.googlecode.com/svn/trunk/projects/codecs/Java/javadocs/org/rlcommunity/rlglue/codec/AgentInterface.html"><TT>AgentInterface</TT></A>
and 
<A NAME="tex2html29"
  HREF="http://rl-glue-ext.googlecode.com/svn/trunk/projects/codecs/Java/javadocs/org/rlcommunity/rlglue/codec/EnvironmentInterface.html"><TT>EnvironmentInterface</TT></A>.
Also, instead of these interfaces being in their own package, they are now in: <A NAME="tex2html30"
  HREF="http://rl-glue-ext.googlecode.com/svn/trunk/projects/codecs/Java/javadocs/org/rlcommunity/rlglue/codec/package-summary.html"><TT>org.rlcommunity.rlglue.codec</TT></A>. 

<P>
Updating existing code might seem like a lot of work, but it's easier than it seems.  The main changes from the user end are:
1) Using the right jar (JavaRLGlueCodec.jar instead of RL-Glue.jar)  (Not necessary if you are using RL-Viz)

<P>
2) Change classes that implement <TT>Agent</TT> and <TT>Environment</TT> to <TT>AgentInterface</TT> and <TT>EnvironmentInterface</TT>

<P>
3) Change package imports.  Find and replace:
<PRE>
rlglue.RLGlue                    ==&gt;    org.rlcommunity.rlglue.codec.RLGlue
rlglue.types.                    ==&gt;    org.rlcommunity.rlglue.codec.types.
rlglue.agent.Agent               ==&gt;    org.rlcommunity.rlglue.codec.AgentInterface
rlglue.environment.Environment   ==&gt;    org.rlcommunity.rlglue.codec.EnvironmentInterface
</PRE>

<P>
4) <TT>org.rlcommunity.rlglue.codec.types.Reward_observation</TT> has been renamed to:
<BR><TT>org.rlcommunity.rlglue.codec.types.Reward_observation_terminal</TT>

<P>
5) <TT>Random_seed_key</TT> and <TT>State_key</TT> have been removed

<P>
Those few things should cover most of it.  If someone makes a very strong case, we can probably create a codec that is completely compatible with the old naming conventions.  However, I assure you that I uploaded
several tens of thousands of lines of code for the RL-Viz, RL-Library, and BT-AgentLib projects in only about 30 minutes total.

<P>
<B>POSSIBLE CONTRIBUTION</B>: If we've missed anything, or there is an easier way, please let us know!

<P>

<H2><A NAME="SECTION00072000000000000000">
Agent/Environment Loading</A>
</H2>
Historically, there have been a few different approaches for loading agents and environments.

<P>
The first (original) method was to call the main() method of the AgentLoader/EnvironmentLoader class, passing it the name of the 
Agent/Env class you wanted to load.  Hopefully you remembered to put it in your classpath.  This approach inevitably lead to lots of typing to load an agent, as frustrating run-time failures when paths weren't set right.
Here is an example of how that looks:
<PRE>
	java org.rlcommunity.rlglue.codec.util.AgentLoader myAgent
</PRE>

<P>
The <B>new and improved</B> method is to put a <TT>main</TT> method inside your agent/environment that calls the applicable loader so that the agent/env can load itself.  So, in your agent (for example) you'd have code like:
<PRE>
	import org.rlcommunity.rlglue.codec.util.AgentLoader;
	/* rest of agent here */
	//This would be inside MyAgent.java
	public static void main(String[] args){
	        AgentLoader theLoader=new AgentLoader(new MyAgent());
	        theLoader.run();
	}
</PRE>

<P>
So, for the price of that tiny bit of code inside your agent, you can now run the agent class directly:
<PRE>
	java myAgent
</PRE>

<P>
We feel that this is a useful step forward, and will be encouraging this approach.

<P>

<H1><A NAME="SECTION00080000000000000000">
Frequently Asked Questions</A>
</H1>
We're waiting to hear your questions!

<P>

<H2><A NAME="SECTION00081000000000000000">
Where can I get more help?</A>
</H2>

<H3><A NAME="SECTION00081100000000000000">
Online FAQ</A>
</H3>
We suggest checking out the online RL-Glue Java Codec FAQ:
<BR>
<TT><A NAME="tex2html31"
  HREF="http://glue.rl-community.org/Home/Extensions/java-codec#TOC-Frequently-Asked-Questions">http://glue.rl-community.org/Home/Extensions/java-codec#TOC-Frequently-Asked-Questions</A></TT>
<P>
The online FAQ may be more current than this document, which may have been distributed some time ago.

<P>

<H3><A NAME="SECTION00081200000000000000">
Google Group / Mailing List</A>
</H3>
First, you should join the RL-Glue Google Group Mailing List:
<BR>
<TT><A NAME="tex2html32"
  HREF="http://groups.google.com/group/rl-glue">http://groups.google.com/group/rl-glue</A></TT>
<P>
We're happy to answer any questions about RL-Glue.  Of course, try to search through previous messages first in case your question has been answered before.

<P>

<H1><A NAME="SECTION00090000000000000000">
Credits and Acknowledgements</A>
</H1>
Andrew Butcher originally wrote the RL-Glue network library and first version of this codec.  Thanks Andrew.

<P>
Brian Tanner has since grabbed the torch and has continued to develop the codec.

<P>

<H2><A NAME="SECTION00091000000000000000">
Contributing</A>
</H2>
If you would like to become a member of this project and contribute updates/changes to the code, please send a message to rl-glue@googlegroups.com.

<P>

<H1><A NAME="SECTION000100000000000000000">
Document Information</A>
</H1>
<PRE>
Revision Number: $Rev: 677 $
Last Updated By: $Author: brian@tannerpages.com $
Last Updated   : $Date: 2009-02-08 18:35:23 -0700 (Sun, 08 Feb 2009) $
$URL: https://rl-glue-ext.googlecode.com/svn/trunk/projects/codecs/Java/docs/JavaCodec.tex $
</PRE>

<P>

<H1><A NAME="SECTION000110000000000000000">
About this document ...</A>
</H1>
 <STRONG>RL-Glue Java Extension (Codec) 2.03 Manual </STRONG><P>
This document was generated using the
<A HREF="http://www.latex2html.org/"><STRONG>LaTeX</STRONG>2<tt>HTML</tt></A> translator Version 2002-2-1 (1.71)
<P>
Copyright &#169; 1993, 1994, 1995, 1996,
<A HREF="http://cbl.leeds.ac.uk/nikos/personal.html">Nikos Drakos</A>, 
Computer Based Learning Unit, University of Leeds.
<BR>
Copyright &#169; 1997, 1998, 1999,
<A HREF="http://www.maths.mq.edu.au/~ross/">Ross Moore</A>, 
Mathematics Department, Macquarie University, Sydney.
<P>
The command line arguments were: <BR>
 <STRONG>latex2html</STRONG> <TT>JavaCodec.tex -split 0 -dir html -mkdir -title 'RL-Glue Java Codec' -local_icons -math</TT>
<P>
The translation was initiated by Brian Tanner on 2009-02-09
<BR><HR><H4>Footnotes</H4>
<DL>
<DT><A NAME="foot225">... RL-Glue</A><A
 HREF="JavaCodec.html#tex2html1"><SUP>1</SUP></A></DT>
<DD><TT><A NAME="tex2html2"
  HREF="http://glue.rl-community.org/">http://glue.rl-community.org/</A></TT>

</DD>
<DT><A NAME="foot226">... Apache-2.0</A><A
 HREF="JavaCodec.html#tex2html3"><SUP>2</SUP></A></DT>
<DD><TT><A NAME="tex2html4"
  HREF="http://www.apache.org/licenses/LICENSE-2.0.html">http://www.apache.org/licenses/LICENSE-2.0.html</A></TT>

</DD>
<DT><A NAME="foot227">... Ant</A><A
 HREF="JavaCodec.html#tex2html7"><SUP>3</SUP></A></DT>
<DD><TT><A NAME="tex2html8"
  HREF="http://ant.apache.org/">http://ant.apache.org/</A></TT>

</DD>
<DT><A NAME="foot229">... string</A><A
 HREF="JavaCodec.html#tex2html13"><SUP>4</SUP></A></DT>
<DD><TT><A NAME="tex2html14"
  HREF="http://glue.rl-community.org/Home/rl-glue/task-spec-language">http://glue.rl-community.org/Home/rl-glue/task-spec-language</A></TT>

</DD>
<DT><A NAME="foot230">... RL-Library</A><A
 HREF="JavaCodec.html#tex2html19"><SUP>5</SUP></A></DT>
<DD><TT><A NAME="tex2html20"
  HREF="http://library.rl-community.org">http://library.rl-community.org</A></TT>

</DD>
</DL><HR>
<!--Navigation Panel-->
<IMG WIDTH="81" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next_inactive" SRC="nx_grp_g.png"> 
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_g.png"> 
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev_g.png">   
<BR>
<!--End of Navigation Panel-->
<ADDRESS>
Brian Tanner
2009-02-09
</ADDRESS>
</BODY>
</HTML>
